{% extends "base.html" %} {% block title %}Edit Medicine - Allo Health{%
endblock %} {% block extra_css %}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
{% endblock %} {% block content %}
<div class="page-header">
  <h1 class="page-title"><i class="fas fa-pills"></i> Edit Medicine</h1>
  <p class="page-subtitle">Update medicine details and stock</p>
</div>

<div class="card" style="max-width: 600px; margin: 0 auto">
  <div class="card-header">
    <h2 class="card-title">{{ medicine.medicine_name }}</h2>
  </div>
  <div class="card-body">
    <form method="POST">
      <div class="form-group">
        <label class="form-label"
          ><i class="fas fa-pill"></i> Medicine Name *</label
        >
        <input
          type="text"
          name="medicine_name"
          class="form-control"
          value="{{ medicine.medicine_name }}"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          ><i class="fas fa-box"></i> Current Stock *</label
        >
        <input
          type="number"
          name="current_stock"
          class="form-control"
          value="{{ medicine.current_stock }}"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          ><i class="fas fa-exclamation"></i> Minimum Stock Level *</label
        >
        <input
          type="number"
          name="min_stock_level"
          class="form-control"
          value="{{ medicine.min_stock_level }}"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          ><i class="fas fa-dollar-sign"></i> Unit Price (â‚¹) *</label
        >
        <input
          type="number"
          name="unit_price"
          class="form-control"
          step="0.01"
          value="{{ medicine.unit_price }}"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label"
          ><i class="fas fa-calendar-alt"></i> Expiry Date</label
        >
        <input
          type="date"
          name="expiry_date"
          class="form-control"
          value="{{ medicine.expiry_date.isoformat() if medicine.expiry_date else '' }}"
        />
      </div>

      {% if medicine.is_expired() %}
      <div class="alert alert-danger">
        <i class="fas fa-ban"></i> <strong>This medicine has expired!</strong>
      </div>
      {% endif %} {% if medicine.is_low_stock() %}
      <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle"></i>
        <strong>Stock is below minimum level!</strong>
      </div>
      {% endif %}

      <div
        style="
          display: flex;
          gap: 1rem;
          margin-top: 2rem;
          padding-top: 1rem;
          border-top: 1px solid var(--border-gray);
        "
      >
        <button type="submit" class="btn btn-success btn-lg">
          <i class="fas fa-check-circle"></i> Update Medicine
        </button>
        <a
          href="{{ url_for('pharmacy_inventory') }}"
          class="btn btn-secondary btn-lg"
        >
          <i class="fas fa-times"></i> Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
